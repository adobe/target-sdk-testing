{
  "description": "campaign macros",
  "artifact": "TEST_ARTIFACT_CAMPAIGN_MACROS",
  "conf": {
    "client": "adobesummit2018",
    "organizationId": "65453EA95A70434F0A495D34@AdobeOrg",
    "pollingInterval": 0
  },
  "test": {
    "mbox_template": {
      "description": "replaces html mbox macro template strings with values",
      "input": {
        "request": {
          "id": {
            "tntId": "338e3c1e51f7416a8e1ccba4f81acea0.28_0"
          },
          "context": {
            "channel": "web",
            "browser": {
              "host": "local-target-test"
            },
            "address": {
              "url": "http://local-target-test/"
            },
            "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.163 Safari/537.36"
          },
          "prefetch": {
            "mboxes": [
              {
                "name": "macros",
                "index": 0,
                "parameters": {
                  "user": "Mickey Mouse",
                  "pgname": "blippi",
                  "browserWidth": 1024
                }
              }
            ]
          }
        }
      },
      "output": {
        "prefetch": {
          "mboxes": [
            {
              "name": "macros",
              "options": [
                {
                  "type": "html",
                  "eventToken": "efH5bqgzESJWpSYmTxCCCGqipfsIHvVzTQxHolz2IpSCnQ9Y9OaLL2gsdrWQTvE54PwSz67rmXWmSnkXpSSS2Q==",
                  "content": "<ul>\n  <li>667871</li>\n  <li>/campaign_macros/experiences/0/pages/0/zones/0/1599065324791</li>\n  <li>362147</li>\n  <li>campaign macros</li>\n  <li>0</li>\n  <li>Experience A</li>\n  <li>362147</li>\n  <li>campaign macros</li>\n  <li>0</li>\n  <li>Experience A</li>\n  <li>macros</li>\n  <li>Mickey Mouse</li>\n  <li>blippi</li>\n  <li>1024</li>\n</ul>"
                }
              ],
              "index": 0
            }
          ]
        }
      }
    },
    "no_value_for_template": {
      "description": "does not replace macro template strings if acceptable values are not available",
      "input": {
        "request": {
          "id": {
            "tntId": "338e3c1e51f7416a8e1ccba4f81acea0.28_0"
          },
          "context": {
            "channel": "web",
            "browser": {
              "host": "local-target-test"
            },
            "address": {
              "url": "http://local-target-test/"
            },
            "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.163 Safari/537.36"
          },
          "prefetch": {
            "mboxes": [
              {
                "name": "macros",
                "index": 0,
                "parameters": {
                  "user": "Donald"
                }
              }
            ]
          }
        }
      },
      "output": {
        "prefetch": {
          "mboxes": [
            {
              "name": "macros",
              "options": [
                {
                  "type": "html",
                  "eventToken": "efH5bqgzESJWpSYmTxCCCGqipfsIHvVzTQxHolz2IpSCnQ9Y9OaLL2gsdrWQTvE54PwSz67rmXWmSnkXpSSS2Q==",
                  "content": "<ul>\n  <li>667871</li>\n  <li>/campaign_macros/experiences/0/pages/0/zones/0/1599065324791</li>\n  <li>362147</li>\n  <li>campaign macros</li>\n  <li>0</li>\n  <li>Experience A</li>\n  <li>362147</li>\n  <li>campaign macros</li>\n  <li>0</li>\n  <li>Experience A</li>\n  <li>macros</li>\n  <li>Donald</li>\n  <li>${mbox.pgname}</li>\n  <li>${mbox.browserWidth}</li>\n</ul>"
                }
              ],
              "index": 0
            }
          ]
        }
      }
    },
    "pageload_template": {
      "description": "replaces pageload option macro template strings with values",
      "input": {
        "request": {
          "id": {
            "tntId": "338e3c1e51f7416a8e1ccba4f81acea0.28_0"
          },
          "context": {
            "channel": "web",
            "browser": {
              "host": "local-target-test"
            },
            "address": {
              "url": "http://local-target-test/"
            },
            "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.163 Safari/537.36"
          },
          "execute": {
            "pageLoad": {
              "parameters": {
                "user": "Mickey Mouse",
                "pgname": "blippi",
                "browserWidth": 1024
              }
            }
          }
        }
      },
      "output": {
        "execute": {
          "pageLoad": {
            "options": [
              {
                "type": "actions",
                "content": [
                  {
                    "type": "setHtml",
                    "selector": "HTML > BODY > UL:nth-of-type(1) > LI:nth-of-type(1)",
                    "cssSelector": "HTML > BODY > UL:nth-of-type(1) > LI:nth-of-type(1)",
                    "content": "362225"
                  }
                ]
              },
              {
                "type": "actions",
                "content": [
                  {
                    "type": "setHtml",
                    "selector": "HTML > BODY > UL:nth-of-type(1) > LI:nth-of-type(2)",
                    "cssSelector": "HTML > BODY > UL:nth-of-type(1) > LI:nth-of-type(2)",
                    "content": "macros pageLoad"
                  }
                ]
              },
              {
                "type": "actions",
                "content": [
                  {
                    "type": "setHtml",
                    "selector": "HTML > BODY > UL:nth-of-type(1) > LI:nth-of-type(3)",
                    "cssSelector": "HTML > BODY > UL:nth-of-type(1) > LI:nth-of-type(3)",
                    "content": "target-global-mbox"
                  }
                ]
              },
              {
                "type": "actions",
                "content": [
                  {
                    "type": "setHtml",
                    "selector": "HTML > BODY > DIV:nth-of-type(1) > H1:nth-of-type(1)",
                    "cssSelector": "HTML > BODY > DIV:nth-of-type(1) > H1:nth-of-type(1)",
                    "content": "Hello Mickey Mouse"
                  }
                ]
              }
            ]
          }
        }
      }
    },
    "view_template": {
      "description": "replaces view option macro template strings with values",
      "input": {
        "request": {
          "id": {
            "tntId": "338e3c1e51f7416a8e1ccba4f81acea0.28_0"
          },
          "context": {
            "channel": "web",
            "browser": {
              "host": "local-target-test"
            },
            "address": {
              "url": "http://local-target-test/"
            },
            "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.163 Safari/537.36"
          },
          "prefetch": {
            "views": [{}]
          }
        }
      },
      "output": {
        "prefetch": {
          "views": [
            {
              "name": "contact",
              "options": [
                {
                  "type": "actions",
                  "eventToken": "tQFHWnWUwSTiTftbAGXrA2qipfsIHvVzTQxHolz2IpSCnQ9Y9OaLL2gsdrWQTvE54PwSz67rmXWmSnkXpSSS2Q==",
                  "content": [
                    {
                      "type": "insertBefore",
                      "selector": "#spa-content > P:nth-of-type(1)",
                      "cssSelector": "#spa-content > P:nth-of-type(1)",
                      "content": "<div id=\"action_insert_1599086396006761\">campaign macros view</div>"
                    }
                  ]
                }
              ],
              "metrics": []
            }
          ]
        }
      }
    }
  }
}
